<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
    <title>Music Emotion Experiment - Block 2</title>
    <style>
        /* [Styles unchanged — same as your original Block 2 file] */
    </style>
</head>
<body>
    <div class="container">
        <!-- Introduction Screen -->
        <div class="screen active" id="intro-screen">
            <div class="block-header">
                <h2>Block 2 of 3</h2>
                <p>This is the second block of the music emotion experiment</p>
            </div>
            <h1>Music Emotion Experiment</h1>
            <div class="intro-text">
                <p>In the following experiment, we would like you to listen to a series of music clips and rate a few things:</p>
                <br>
                <p>1. Your experienced valence, or <strong>how positive/negative the music makes you feel</strong></p>
                <p>2. Your arousal levels, or the <strong>intensity of how you feel</strong></p>
                <p>3. Your <strong>familiarity</strong> with the music</p>
                <p>4. The "groove" of the music, or <strong>how much the music makes you want to dance</strong></p>
                <br>
                <p><strong>Please try your best to keep your eyes focused on the white cross while listening. Also, please turn up your volume to at least 75% of max volume.</strong></p>
                <br>
                <p>Each clip lasts 30 seconds. Occasionally, the music you hear will consist only of rhythmic sequences. After each clip, regardless of whether you heard a song or a drum loop, you will be asked the questions mentioned above.</p>
                <br>
                <p>First, we will practice rating some music to familiarize you with the surveys. Once you finish the practice, the full questions will no longer appear for each survey, and will instead be labeled on each end of the scale.</p>
                <br>
                <p style="color: #ff4444; font-weight: bold; font-size: 1.1em;">**IMPORTANT: At the end of this block, you MUST download your data to save your responses!**</p>
                <br>
                <p>To begin, hit the continue button below.</p>
            </div>
            <button class="btn" onclick="startPractice()">Continue</button>
            <button class="btn" onclick="recoverStoredData()" style="position: fixed; bottom: 20px; left: 20px; background: linear-gradient(45deg, #95a5a6, #7f8c8d); font-size: 0.9em; padding: 10px 15px;">Recover Old Data</button>
        </div>

        <!-- Practice Introduction Screen -->
        <div class="screen" id="practice-intro-screen">
            <div class="practice-header">
                <h2>Practice Session</h2>
                <p>Let's start with a brief practice using practice music clips</p>
            </div>
            <div class="intro-text">
                <p>You will:</p>
                <ul style="margin-left: 20px;">
                    <li>Listen to practice music clips (10 seconds each)</li>
                    <li>Rate your emotional responses after each clip</li>
                    <li>Get familiar with the rating scales</li>
                </ul>
                <br>
                <p>Click Continue when you're ready to begin the practice, or Skip if you've done this before.</p>
            </div>
            <button class="btn" onclick="startPracticeTrials()">Continue to Practice</button>
            <button class="btn" onclick="skipPractice()" style="background: linear-gradient(45deg, #95a5a6, #7f8c8d); margin-left: 20px;">Skip Practice</button>
        </div>

        <!-- [Other screens remain unchanged: audio-screen, rating-screen, practice-complete-screen, feedback-screen, completion-screen] -->
    </div>

    <script>
        // Experiment Configuration
        const AUDIO_DURATION = 30000;
        const PRACTICE_AUDIO_DURATION = 10000;
        const REPETITIONS_PER_SONG = 1;

        // ✅ FIX ADDED: startPractice function
        function startPractice() {
            document.getElementById("intro-screen").classList.remove("active");
            document.getElementById("practice-intro-screen").classList.add("active");
        }

        // [Rest of your script from Block 2 remains unchanged: startPracticeTrials, skipPractice, startAudioPlayback, nextTrial, etc.]
    </script>
</body>
</html>
